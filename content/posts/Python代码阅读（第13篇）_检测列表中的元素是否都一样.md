---
title: Python代码阅读（第13篇）：检测列表中的元素是否都一样
date: 2020-07-23T12:03:59+08:00
lastmod: 2020-07-23T12:03:59+08:00
author: Zhang nan
cover: /post/Python代码阅读（第13篇）_检测列表中的元素是否都一样-cover.jpg
categories: ["技术"]
tags: ["Python"]
draft: false
---

本篇阅读的代码实现了检测列表中的元素是否都一样的逻辑。

本篇阅读的代码片段来自于[30-seconds-of-python](https://github.com/30-seconds/30-seconds-of-python)。

<!--more-->

## `all_equal`

```python
def all_equal(lst):
  return lst[1:] == lst[:-1]

# EXAMPLES
all_equal([1, 2, 3, 4, 5, 6]) # False
all_equal([1, 1, 1, 1]) # True
```

`all_equal`函数接收一个列表，并判断列表中的各个元素是否都一样，如果一样就返回`True`否则返回`false`。

该函数采用的判断方式比较巧妙，将原列表去除第一个元素之后的子列表和原列表去除最后一个元素子列表进行对比。也就是原列表的元素进行了错位比较，元素从头到尾依次进行比较。

```mathematica
[a[0], a[1], ... a[n-1]] == [a[1], a[2], ... a[n]]
a[0] == a[1], a[1] == a[2], ... a[n-1] == a[n]
a[0] == a[1] == a[2] ... a[n-1] == a[n]
```

### 列表切片
`lst[1:]`和`lst[:-1]`是列表切片的形式。`lst[1:]`表示从列表`lst`下标为`1`的元素开始一直到列表`lst`最后一个元素的子列表。`lst[:-1]`则是从第一个元素（下标为`0`）开始直至列表的倒数第二个元素。

一般而言列表切片的形式是`lst[a:b]`。`a`和`b`代表了列表的索引。`lst[a:b]`返回的子列表从索引`a`开始，直到索引`b`的前一个元素停止。省略`a`或者`b`代表了“从头开始”或“直到列表结尾”。`lst[:]`会返回整个列表的切片。负数索引返回离列表末尾相应距离的元素，`-1`指的是列表最后一个元素。
